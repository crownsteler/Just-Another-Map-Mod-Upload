namespace = cr_europe_events

cr_europe_events.1 = { #Sound of Science
	type = country_event
	placement = scope:sound_of_science_state

	title = cr_europe_events.1.t
	desc = cr_europe_events.1.d
	flavor = cr_europe_events.1.f

	event_image = {
		video = "gfx/event_pictures/unspecific_trains.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/unspecific/trains"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	duration = 3

	trigger = {
		NOT = {
			has_global_variable = sound_of_science_state_variable
		}
		year >= 1840
		any_state = {
			owner = ROOT
			is_incorporated = yes
			has_building = building_railway
			any_scope_building = {
				is_building_type = building_university
				level >= 2
			}
		}
		has_technology_researched = empiricism
	}

	immediate = {
		set_global_variable = sound_of_science_state_variable
		random_scope_state = {
			limit = {
				is_incorporated = yes
				has_building = building_railway
				any_scope_building = {
					is_building_type = building_university
					level >= 2
				}
			}
			save_scope_as = sound_of_science_state
		}
	}

	option = {
		name = cr_europe_events.1.a
		if = {
			limit = {
				has_technology_researched = telephone
				NOT = { has_technology_researched = radio }
			}
			add_technology_progress = { progress = 750 technology = radio }
		}
		else_if = {
			limit = {
				has_technology_researched = electrical_generation
				has_technology_researched = shift_work
				NOT = { has_technology_researched = telephone }
			}
			add_technology_progress = { progress = 750 technology = telephone }
		}
		else = {
			limit = {
				NOT = { has_technology_researched = has_technology_researched = radio }
			}
			country_prestige_add = 5
		}
	}
}

cr_europe_events.5 = { #The English Sytt
	type = country_event
	placement = scope:LadyHestersHomeProvince

	title = cr_europe_events.5.t
	desc = cr_europe_events.5.desc_2
	flavor = cr_europe_events.5.f

	event_image = {
		video = "gfx/event_pictures/middleeast_middleclass_cafe.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/africa/leader_arguing"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	duration = 3

	trigger = {
		year < 1840
		NOT = {
			has_global_variable = LadyHestersDebts
		}
		OR = {
			AND = {
				ROOT = c:EGY
				OR = {
					p:xA050E0.owner = c:EGY #South Lebanon
					p:xA050E0.owner = { is_subject_of = c:EGY }
				}
			}
			AND = {
				ROOT = c:TUR
				p:xA050E0.owner = c:TUR #South Lebanon
			}
			AND = {
				p:xA050E0.owner = ROOT #South Lebanon
				is_subject = NO
				is_country_type = unrecognized
			}
		}
		OR = {
			AND = {
				exists = c:GBR
				c:GBR = {
					has_law = law_type:law_monarchy
					has_interest_marker_in_region =	region_levant
				}
			}
			AND = {
				exists = c:ENG
				c:ENG = {
					has_law = law_type:law_monarchy
					has_interest_marker_in_region =	region_levant
				}
			}
		}
	}

	immediate = {
		save_scope_as = LadyHestersLiege
		p:xA050E0 = {
			save_scope_as = LadyHestersHomeProvince
		}
		random_scope_state = {
			limit = {
				state_region = s:STATE_LEBANON
			}
			save_scope_as = LadyHestersHome
		}
		set_global_variable = {
			name = LadyHestersDebts
			months = normal_modifier_time
		}
		if	= {
			limit = {
				exists = c:ENG
			}
			c:ENG = {
				save_scope_as = LadyHesterMotherland
			}
		}
		else_if = {
			limit = {
				exists = c:GBR
			}
			c:GBR = {
				save_scope_as = LadyHesterMotherland
			}			
		}
	}

	option = {
		name = cr_europe_events.5.a
		trigger = {
			ROOT = {
				OR = {
					country_has_state_religion = rel:sunni
					country_has_state_religion = rel:shiite
				}
				NOT = { has_law = law_type:law_total_separation }
			}
		}
		ig:ig_devout = {
			add_modifier = {
				name = cr_riba_condemned_devout
				months = normal_modifier_time
			}
		}
		ig:ig_industrialists = {
			add_modifier = {
				name = cr_riba_condemned_bankers
				months = normal_modifier_time
			}
		}
		scope:LadyHestersHome = {
			add_modifier = {
				name = cr_riba_condemned_income
				months = normal_modifier_time
			}
		}
		custom_tooltip = cr_europe_events.5.a_tt
		ai_chance = {
			base = 25
		}
	}
	option = {
		name = cr_europe_events.5.b
		default_option = yes
		#trigger = {
		#	NOR = {
		#		c:ENG = {
		#			has_war_with = ROOT
		#		}
		#		c:GBR = {
		#			has_war_with = ROOT
		#		}
		#	}
		#}
		if = {
			limit = {
				exists = c:GBR
			}
			c:GBR = {
				trigger_event = { id = cr_europe_events.6 days = 7 popup = no }
			}
		}
		else_if = {
			limit = {
				exists = c:ENG
			}
			c:ENG = {
				trigger_event = { id = cr_europe_events.6 days = 7 popup = no }
			}
		}
		custom_tooltip = cr_europe_events.5.b_tt
		ai_chance = {
			base = 40
		}
	}
	option = {
		name = cr_europe_events.5.c
		scope:LadyHestersHome = {
			add_radicals_in_state = {
				value = 0.15
				strata = poor
			}
		}
		custom_tooltip = cr_europe_events.5.c_tt
		ai_chance = {
			base = 25
		}
	}
	option = {
		name = cr_europe_events.5.d
		#custom_tooltip = cr_europe_events.5.d_tt
		add_treasury = -10000
		ig:ig_devout = {
			add_modifier = {
				name = cr_engaged_in_riba
				months = normal_modifier_time
			}
		}
		scope:LadyHestersHome = {
			add_modifier = {
				name = cr_riba_endorsed_income
				months = normal_modifier_time
			}
		}
		ai_chance = {
			base = 10
		}
	}
}



cr_europe_events.6 = { #Queen of the Desert
	type = country_event
	placement = scope:LadyHestersHomeProvince

	title = cr_europe_events.6.t
	desc = cr_europe_events.6.desc
	flavor = cr_europe_events.6.f

	event_image = {
		video = "gfx/event_pictures/middleeast_middleclass_cafe.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/africa/leader_arguing"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	duration = 3

	trigger = {
	}

	option = {
		name = cr_europe_events.6.a
		custom_tooltip = cr_europe_events.6.a_tt
		add_treasury = -20000
		scope:LadyHestersLiege = {
			trigger_event = { id = cr_europe_events.8 days = 0 popup = no }
			if = {
				limit = {
					exists = c:GBR
				}
				change_relations = {
					country = c:GBR
					value = 15
				}
			}
			if = {
				limit = {
					exists = c:ENG
				}
				change_relations = {
					country = c:ENG
					value = 10
				}
			}
		}
		change_relations = {
			country = c:TUR
			value = 5
		}		
		ig:ig_intelligentsia = {
			add_modifier = {
				name = cr_paid_noble_debt_negative
				months = short_modifier_time
			}
		}
		ai_chance = {
			base = 30
		}
	}
	
	option = {
		name = cr_europe_events.6.b
		default_option = yes
		custom_tooltip = cr_europe_events.6.b_tt
		scope:LadyHestersLiege = {
			trigger_event = { id = cr_europe_events.7 days = 0 popup = no }
			if = {
				limit = {
					exists = c:GBR
				}
				change_relations = {
					country = c:GBR
					value = -15
				}
			}
			if = {
				limit = {
					exists = c:ENG
				}
				change_relations = {
					country = c:ENG
					value = -10
				}
			}
		}
		ig:ig_landowners = {
			add_modifier = {
				name = cr_not_paid_noble_debt_negative
				months = short_modifier_time
			}
		}		
		ai_chance = {
			base = 70
		}
	}
}

cr_europe_events.7 = { #The English Sytt - England doesn't pay
	type = country_event
	placement = scope:LadyHestersHomeProvince

	title = cr_europe_events.7.t
	desc = cr_europe_events.7.desc
	flavor = cr_europe_events.7.f

	event_image = {
		video = "gfx/event_pictures/middleeast_middleclass_cafe.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/africa/leader_arguing"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	duration = 3

	trigger = {
	}

	option = {
		name = cr_europe_events.5.a
		trigger = {
			ROOT = {
				OR = {
					religion = rel:sunni
					religion = rel:shiite
				}
				NOT = { has_law = law_type:law_total_separation }
			}
		}
		ig:ig_devout = {
			add_modifier = {
				name = cr_riba_condemned_devout
				months = normal_modifier_time
			}
		}
		ig:ig_industrialists = {
			add_modifier = {
				name = cr_riba_condemned_bankers
				months = normal_modifier_time
			}
		}
		scope:LadyHestersHome = {
			add_modifier = {
				name = cr_riba_condemned_income
				months = normal_modifier_time
			}
		}
		custom_tooltip = cr_europe_events.5.a_tt
		ai_chance = {
			base = 20
		}
	}
	option = {
		name = cr_europe_events.5.c
		default_option = yes
		custom_tooltip = cr_europe_events.5.c_tt
		scope:LadyHestersHome = {
			add_radicals = {
				value = 0.10
				strata = poor
			}
		}
		ai_chance = {
			base = 60
		}
	}
	option = {
		name = cr_europe_events.5.d
		#custom_tooltip = cr_europe_events.5.d_tt
		ig:ig_devout = {
			add_modifier = {
				name = cr_engaged_in_riba
				months = normal_modifier_time
			}
		}
		scope:LadyHestersHome = {
			add_modifier = {
				name = cr_riba_endorsed_income
				months = normal_modifier_time
			}
		}
		ai_chance = {
			base = 20
		}
	}
}

cr_europe_events.8 = { #The English Sytt - England Pays
	type = country_event
	placement = scope:LadyHestersHomeProvince

	title = cr_europe_events.8.t
	desc = cr_europe_events.8.desc
	flavor = cr_europe_events.8.f

	event_image = {
		video = "gfx/event_pictures/middleeast_middleclass_cafe.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/africa/leader_arguing"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds"

	duration = 3

	trigger = {

	}

	option = {
		name = cr_europe_events.8.a
		default_option = yes
		state:LadyHestersHome = {
			add_modifier = {
				name = cr_riba_endorsed_income
				months = normal_modifier_time
			}
		}
	}
}





cr_europe_events.20 = { #An Issue of Ownership
	type = country_event
	placement = scope:cr_fernado_po_claimant.capital

	title =  cr_europe_events.20.t
	desc = {
		first_valid = {
			triggered_desc = {
				desc = cr_europe_events.20.desc_1_obl_offered
				trigger = {
					var:cr_pressed_the_fernando_po_issue = 1
					has_variable = cr_pressed_claimed_offer_obligation
				}
			}
			triggered_desc = {
				desc = cr_europe_events.20.desc_1
				trigger = {
					var:cr_pressed_the_fernando_po_issue = 1
					#NOT = { has_variable = cr_pressed_claimed_offer_obligation }
				}
			}
			triggered_desc = {
				desc = cr_europe_events.20.desc_2_obl_offered
				trigger = {
					var:cr_pressed_the_fernando_po_issue = 2
					has_variable = cr_pressed_claimed_offer_obligation
				}
			}
			triggered_desc = {
				desc = cr_europe_events.20.desc_2
				trigger = {
					var:cr_pressed_the_fernando_po_issue = 2
					#NOT = { has_variable = cr_pressed_claimed_offer_obligation }
				}
			}
			triggered_desc = {
				desc = cr_europe_events.20.desc_3_obl_offered
				trigger = {
					var:cr_pressed_the_fernando_po_issue = 3
					has_variable = cr_pressed_claimed_offer_obligation
				}
			}
			triggered_desc = {
				desc = cr_europe_events.20.desc_3
				trigger = {
					var:cr_pressed_the_fernando_po_issue = 3
					#NOT = { has_variable = cr_pressed_claimed_offer_obligation }
				}
			}
			triggered_desc = {
				desc = cr_europe_events.20.desc_4_obl_offered
				trigger = {
					var:cr_pressed_the_fernando_po_issue = 4
					has_variable = cr_pressed_claimed_offer_obligation
				}
			}
			triggered_desc = {
				desc = cr_europe_events.20.desc_4
				trigger = {
					var:cr_pressed_the_fernando_po_issue = 4
					#NOT = { has_variable = cr_pressed_claimed_offer_obligation }
				}
			}
			triggered_desc = {
				desc = cr_europe_events.20.desc_5_obl_offered
				trigger = {
					var:cr_pressed_the_fernando_po_issue = 5
					has_variable = cr_pressed_claimed_offer_obligation
				}
			}
			triggered_desc = {
				desc = cr_europe_events.20.desc_5
				trigger = {
					var:cr_pressed_the_fernando_po_issue = 5
					#NOT = { has_variable = cr_pressed_claimed_offer_obligation }
				}
			}
			triggered_desc = {
				desc = cr_europe_events.20.desc_6_obl_offered
				trigger = {
					#var:cr_pressed_the_fernando_po_issue = 6
					has_variable = cr_pressed_claimed_offer_obligation
				}
			}
			triggered_desc = {
				desc = cr_europe_events.20.desc_6
				trigger = {
					always = yes
				}
			}
		}
		triggered_desc = { #small flavour description for Britian added
			desc = cr_europe_events.20.desc_GBR
			trigger = {
				OR = {
					this = c:GBR
					this = c:ENG
				}
				NOT = {
					has_law = law_type:law_slave_trade
				}
				#NOT has ended west india squadron
				var:cr_pressed_the_fernando_po_issue = 1
			}
		}
	}
	
	#flavor =  cr_europe_events.20.f

	event_image = {
		video = "unspecific_politicians_arguing"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"

	icon = "gfx/interface/icons/event_icons/event_default.dds"

	duration = 3

	immediate = {
		clear_scope = cr_fernado_po_seller
		save_scope_as = cr_fernado_po_seller
		if = {
			NOT = {
				var:cr_pressed_the_fernando_po_issue = 0					
			}
			set_variable = {
				name = cr_pressed_the_fernando_po_issue
				value = 1
			}
		}
		else = {
			change_variable = {
				name = cr_pressed_the_fernando_po_issue
				add = 1
			}
		}
		random_state = {
			limit = {
				state_region = s:STATE_SAO_TOME_AND_PRINCIPE
				owner = ROOT
			}
			save_scope_as = cr_fernado_po_province
		}
	}

	option = { #Cede the island - GBR
		name =  cr_europe_events.20.a_WAS
		default_option = yes
		trigger = {
			NOT = { has_variable = cr_pressed_claimed_offer_obligation }
			OR = {
				c:GBR = this
				c:ENG = this
			}
			#NOT abolished West Africa Squadron
		}
		scope:cr_fernado_po_claimant = {
			post_notification = cr_fernando_po_returned
		}
		custom_tooltip = {
			text = cr_europe_events.20_opt_tt
			s:STATE_SAO_TOME_AND_PRINCIPE  = {
				set_owner_of_provinces = {
					country = scope:cr_fernado_po_claimant
					provinces = {
						x902089
					}
				}
			}
		}
		every_country = {
			limit = {
				NOR = {
					THIS = ROOT
					scope:cr_fernado_po_claimant = THIS
					scope:cr_fernado_po_seller = THIS
				}
				has_interest_marker_in_region = region_biafra
					
			}
			post_notification = cr_fernando_po_returned
		}
		hidden_effect = {
			clear_variable = cr_pressed_claimed_offer_obligation
			clear_variable = cr_pressed_the_fernando_po_issue
		}
		ai_chance = {
			base = 100
		}
	}

	option = { #Cede the island - not GBR
		name = cr_europe_events.20.a_nWAS
		default_option = yes
		trigger = {
			NOT = { has_variable = cr_pressed_claimed_offer_obligation }
			NOR = {
				c:GBR = this
				c:ENG = this
				#NOT abolished West Africa Squadron
			}
		}
		scope:cr_fernado_po_claimant = {
			post_notification = cr_fernando_po_returned
		}
		custom_tooltip = {
			text = cr_europe_events.20_opt_tt
			s:STATE_SAO_TOME_AND_PRINCIPE  = {
				set_owner_of_provinces = {
					country = scope:cr_fernado_po_claimant
					provinces = {
						x902089
					}
				}
			}
		}
		every_country = {
			limit = {
				NOR = {
					THIS = ROOT
					scope:cr_fernado_po_claimant = THIS
					scope:cr_fernado_po_seller = THIS
				}
				has_interest_marker_in_region = region_biafra
					
			}
			post_notification = cr_fernando_po_returned
		}
		hidden_effect = {
			clear_variable = cr_pressed_claimed_offer_obligation
			clear_variable = cr_pressed_the_fernando_po_issue
		}
		ai_chance = {
			base = 100
		}
	}
	option = { #Cede the island for an obligation - GBR
		name =  cr_europe_events.20.a_WAS
		default_option = yes
		trigger = {
			has_variable = cr_pressed_claimed_offer_obligation
			OR = {
				c:GBR = this
				c:ENG = this
			}
			#NOT abolished West Africa Squadron
		}
		custom_tooltip = {
			text = cr_europe_events.20_opt_obl_tt
			s:STATE_SAO_TOME_AND_PRINCIPE  = {
				set_owner_of_provinces = {
					country = scope:cr_fernado_po_claimant
					provinces = {
						x902089
					}
				}
			}
			scope:cr_fernado_po_claimant = {
				post_notification = cr_fernando_po_returned_obligation
				set_owes_obligation_to = {
					country = ROOT
					setting = yes
				}
			}
		}
		every_country = {
			limit = {
				NOR = {
					THIS = ROOT
					scope:cr_fernado_po_claimant = THIS
					scope:cr_fernado_po_seller = THIS
				}
				has_interest_marker_in_region = region_biafra
					
			}
			post_notification = cr_fernando_po_returned
		}
		hidden_effect = {
			clear_variable = cr_pressed_claimed_offer_obligation
			clear_variable = cr_pressed_the_fernando_po_issue
		}
		ai_chance = {
			base = 100
		}
	}
	
	option = { #Cede the island for an obligation not GBR
		name = cr_europe_events.20.a_obligation_nWAS
		default_option = yes
		trigger = {
			has_variable = cr_pressed_claimed_offer_obligation
			NOR = {
				c:GBR = this
				c:ENG = this
				#NOT abolished West Africa Squadron
			}
		}
		custom_tooltip = {
			text = cr_europe_events.20_opt_obl_tt
			s:STATE_SAO_TOME_AND_PRINCIPE  = {
				set_owner_of_provinces = {
					country = scope:cr_fernado_po_claimant
					provinces = {
						x902089
					}
				}
			}
			scope:cr_fernado_po_claimant = {
				post_notification = cr_fernando_po_returned_obligation
				set_owes_obligation_to = {
					country = ROOT
					setting = yes
				}
			}
		}
		hidden_effect = {
			clear_variable = cr_pressed_claimed_offer_obligation
			clear_variable = cr_pressed_the_fernando_po_issue
		}	
		every_country = {
			limit = {
				NOR = {
					THIS = ROOT
					scope:cr_fernado_po_claimant = THIS
					scope:cr_fernado_po_seller = THIS
				}
				has_interest_marker_in_region = region_biafra
					
			}
			post_notification = cr_fernando_po_returned
		}
		ai_chance = {
			base = 100
		}
	}
	option = { #Ignore them, keep the island for now
		name =  cr_europe_events.20.b
		if = {
			limit = { 
				has_variable = cr_pressed_claimed_offer_obligation
			}
			scope:cr_fernado_po_claimant = {
				post_notification = cr_fernando_po_negotionations_negative_obligation
			}
		}
		else = {
			scope:cr_fernado_po_claimant = {
				post_notification = cr_fernando_po_kept
			}		
		}
		change_infamy = 2
		#s:STATE_SAO_TOME_AND_PRINCIPE = { #Need to figure out how to only target the British part.
		#	add_claim = scope:cr_fernado_po_claimant
		#}
		change_relations = {
			country = scope:cr_fernado_po_claimant
			value = -25
		}
		hidden_effect = {
			clear_variable = cr_pressed_claimed_offer_obligation
			clear_variable = cr_pressed_the_fernando_po_issue
		}
		ai_chance = {
			base = 0
		}
	}
	#option = { #Expend an obligation to gain permanent control
	#	name =  cr_europe_events.20.d
	#	custom_tooltip = cr_europe_events.20.d_tt
	#	trigger = {
	#		is_owed_obligation_by = scope:cr_fernado_po_claimant
	#		NOT = {
	#			has_variable = cr_pressed_claimed_offer_obligation
	#		}
	#	}
	#	hidden_effect = {
	#		clear_variable = cr_pressed_claimed_offer_obligation
	#		clear_variable = cr_pressed_the_fernando_po_issue
	#	}
	#	ai_chance = {
	#		base = 5
	#		modifier = {
	#			if = {
	#				infamy >= 45
	#			}
	#			add = -5
	#		}
	#	}
	#}
}

cr_europe_events.21 = { #A Slaving Hub in the Making
	type = country_event
	placement = scope:cr_fernado_po_claimant.capital

	title =  cr_europe_events.21.t
	desc = {
		first_valid = {
			triggered_desc = {
				desc =  cr_europe_events.21.desc_our_slavery
				trigger = {
					has_law = law_type:law_slave_trade
				}
			}
			triggered_desc = {
				desc =  cr_europe_events.21.desc_their_slavery
				trigger = {
					scope:cr_fernado_po_claimant = {
						has_law = law_type:law_slave_trade
					}
				}
			}
		}
	}
	#flavor =  cr_europe_events.21.f

	event_image = {
		video = "unspecific_politicians_arguing"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/africa/leader_arguing"

	icon = "gfx/interface/icons/event_icons/event_default.dds"

	duration = 3

	immediate = {
		save_scope_as = cr_fernado_po_seller
	}

	option = { #We have slavery and keep the island
		name =  cr_europe_events.21.a
		trigger = {
			has_law = law_type:law_slave_trade
		}
		scope:cr_fernado_po_seller = {
			set_variable = cr_slavery_return_of_fernando_po
			trigger_event = {
				id = cr_europe_events.29
			}
		}
		custom_tooltip = {
			text = cr_europe_events.21.a_our_slavery_tt
			state:STATE_SAO_TOME_AND_PRINCIPE  = {
				set_owner_of_provinces = {
					country = scope:cr_fernado_po_claimant
					provinces = {
						x902089
					}
				}
			}
		}
		s:STATE_SAO_TOME_AND_PRINCIPE = {
			add_claim = scope:cr_fernado_po_claimant
		}
		ai_chance = {
			base = 75
		}
	}

	option = { #We have slavery and return the island
		name =  cr_europe_events.21.b
		trigger = {
			has_law = law_type:law_slave_trade
		}
		custom_tooltip = {
			text = cr_europe_events.21.b_our_slavery_tt
		}
		scope:cr_fernado_po_claimant = {
			set_variable = cr_slavery_loss_of_fernando_po
			trigger_event = {
				id = cr_europe_events.28
			}
		}
		change_infamy = 3
		show_as_tooltip = {
			change_relations = {
				country = scope:cr_fernado_po_claimant
				value = -25
			}
		}
		ai_chance = {
			base = 25
			modifier = {
				if = {
					infamy >= 45
				}
				add = -25
			}
		}
	}

	option = { #They have slavery and we keep the island
		name =  cr_europe_events.22.c_their_slavery
		trigger = {
			has_law = law_type:law_slave_trade
		}
		custom_tooltip = {
			text = cr_europe_events.22.c_their_slavery_tt
		}
		scope:cr_fernado_po_claimant = {
			set_variable = cr_slavery_loss_of_fernando_po
			trigger_event = {
				id = cr_europe_events.29
			}
		}
		s:STATE_SAO_TOME_AND_PRINCIPE = {
			add_claim = scope:cr_fernado_po_claimant
		}
		ai_chance = {
			base = 85
		}
	}

	option = { #They have slavery and we return the island
		name =  cr_europe_events.22.d_their_slavery
		trigger = {
			has_law = law_type:law_slave_trade
		}
		scope:cr_fernado_po_claimant = {
			set_variable = cr_slavery_return_of_fernando_po
			trigger_event = {
				id = cr_europe_events.28
			}
		}
		custom_tooltip = {
			text = cr_europe_events.22.d_their_slavery_tt
			state:STATE_SAO_TOME_AND_PRINCIPE  = {
				set_owner_of_provinces = {
					country = scope:cr_fernado_po_claimant
					provinces = {
						x902089
					}
				}
			}
		}
		change_infamy = 3
		show_as_tooltip = {
			change_relations = {
				country = scope:cr_fernado_po_claimant
				value = -25
			}
		}
		ai_chance = {
			base = 15
			modifier = {
				if = {
					infamy >= 45
				}
				add = -15
			}
		}
	}
}

cr_europe_events.23 = { #Foreign Office Blunder
	type = country_event
	placement = scope:cr_fernado_po_occupier.capital

	title =  cr_europe_events.23.t
	desc =  cr_europe_events.23.desc
	#flavor =  cr_europe_events.23.f

	event_image = {
		video = "unspecific_politicians_arguing"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/africa/leader_arguing"

	icon = "gfx/interface/icons/event_icons/event_default.dds"

	duration = 3

	immediate = {
		
	}

	option = { #Demand return
		name =  cr_europe_events.23.a
		scope:cr_fernado_po_occupier = {
			trigger_event = {
				id = cr_europe_events.24
			}
		}
		ai_chance = {
			base = 60
		}
	}

	option = { #Never mind
		name =  cr_europe_events.23.b
		change_infamy = -3
		#change_relations = {
		#	country = scope:cr_fernado_po_owner
		#	value = -15
		#}
		#change_relations = {
		#	country = scope:cr_fernado_po_occupier
		#	value = -5
		#}
		ai_chance = {
			base = 40
			modifier = {
				if = {
					infamy >= 45
				}
				add = 40
			}
		}
	}
}

cr_europe_events.24 = { #Foreign Office Blunder
	type = country_event
	placement = scope:cr_fernado_po_claimant.capital

	title =  cr_europe_events.24.t
	desc =  cr_europe_events.24.desc
	flavor =  cr_europe_events.24.f

	event_image = {
		video = "unspecific_politicians_arguing"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/africa/leader_arguing"

	icon = "gfx/interface/icons/event_icons/event_default.dds"

	duration = 3

	immediate = {
		save_scope_as = cr_fernado_po_seller
	}

	option = { #Return the island
		name =  cr_europe_events.26.a
		scope:cr_fernado_po_claimant = {
			set_variable = cr_slavery_return_of_fernando_po
			trigger_event = {
				id = cr_europe_events.28
			}
		}
		state:STATE_SAO_TOME_AND_PRINCIPE  = {
			set_owner_of_provinces = {
				country = scope:cr_fernado_po_claimant
				provinces = {
					x902089
				}
			}
		}
		ai_chance = {
			base = 55
		}
	}

	option = { #Keep the island
		name =  cr_europe_events.26.b
		scope:cr_fernado_po_claimant = {
			set_variable = cr_slavery_loss_of_fernando_po
			trigger_event = {
				id = cr_europe_events.29
			}
		}
		change_infamy = 3
		show_as_tooltip = {
			change_relations = {
				country = scope:cr_fernado_po_claimant
				value = -25
			}
		}
		s:STATE_SAO_TOME_AND_PRINCIPE = {
			add_claim = scope:cr_fernado_po_claimant
		}
		ai_chance = {
			base = 45
			modifier = {
				if = {
					infamy >= 45
				}
				add = -45
			}
		}
	}
}

cr_europe_events.28 = { #The Return of Fernando Po
	type = country_event
	placement = scope:cr_fernado_po_seller.capital

	title =  cr_europe_events.28.t
	desc = {
		first_valid = {
			triggered_desc = {
				desc =  cr_europe_events.28.desc_our_slavery
				trigger = {
					has_variable = cr_slavery_return_of_fernando_po
					has_law = law_type:law_slave_trade
				}
			}
			triggered_desc = {
				desc =  cr_europe_events.28.desc_their_slavery
				trigger = {
					has_variable = cr_slavery_return_of_fernando_po
					NOT = { has_law = law_type:law_slave_trade }
				}
			}
			triggered_desc = {
				desc = cr_europe_events.28.desc_regular
				trigger = {
					always = yes
				}
			}
		}
	}
	#flavor =  cr_europe_events.28.f

	event_image = {
		video = "unspecific_signed_contract"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/africa/leader_arguing"

	icon = "gfx/interface/icons/event_icons/event_default.dds"

	duration = 3


	option = {
		name =  cr_europe_events.28.a
		custom_tooltip = cr_europe_events.28.a_tt
		hidden_effect = {
			remove_variable = cr_normal_return_of_fernando_po
			remove_variable = cr_slavery_return_of_fernando_po
		}
	}
}

cr_europe_events.29 = { #The Loss of Fernando Po
	type = country_event
	placement = scope:cr_fernado_po_seller.capital

	title =  cr_europe_events.29.t
	desc = {
		first_valid = {
			triggered_desc = {
				desc =  cr_europe_events.29.desc_our_slavery
				trigger = {
					has_variable = cr_slavery_return_of_fernando_po
					has_law = law_type:law_slave_trade
				}
			}
			triggered_desc = {
				desc =  cr_europe_events.29.desc_their_slavery
				trigger = {
					has_variable = cr_slavery_return_of_fernando_po
					NOT = { has_law = law_type:law_slave_trade }
				}
			}
			triggered_desc = {
				desc = cr_europe_events.28.desc_regular
				trigger = {
					always = yes
				}
			}
		}
	}
	#flavor =  cr_europe_events.29.f

	event_image = {
		video = "unspecific_politicians_arguing"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/africa/leader_arguing"

	icon = "gfx/interface/icons/event_icons/event_default.dds"

	duration = 3


	option = {
		name =  cr_europe_events.29.a
		custom_tooltip = cr_europe_events.29.a_tt
		custom_tooltip = cr_europe_events.29.a_tt_2
		change_relations = {
			country = scope:cr_fernado_po_owner
			value = -25
		}
		hidden_effect = {
			remove_variable = cr_normal_loss_of_fernando_po
			remove_variable = cr_slavery_loss_of_fernando_po
		}
	}
}