namespace = cr_russian_alaska_events

cr_russian_alaska_events.1 = { #Two Years Before the Mast
	type = country_event
	placement = p:x211ECF

	title = cr_russian_alaska_events.1.t
	desc = {
		first_valid = {
			triggered_desc = {
				desc = cr_russian_alaska_events.1.d_russia
				trigger = {
					ROOT = c:ASK
					is_subject_of = c:RUS
				}
			}
			triggered_desc = {
				desc = cr_russian_alaska_events.1.d
				trigger = {
					always = yes
				}
			}
		}
	}
	flavor = cr_russian_alaska_events.1.f
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/africa/construction_colony"

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds"

	event_image = {
		video = "gfx/event_pictures/unspecific_steam_ship.bk2"
	}
	
	duration = 3

	trigger = {
		year > 1836
		p:xD6A835.owner = ROOT
		s:STATE_CALIFORNIA.region_state:ASK = {
			any_scope_building = {
				is_building_type = building_fur_trading_post
			}
		}
	}

	immediate = {
		ROOT = {
			save_scope_as = selling_country
		}
		top_overlord = {
			save_scope_as = selling_country_overlord
		}
		p:x1116AA.owner = {
			save_scope_as = buying_country
		}
		s:STATE_CALIFORNIA = {
			random_scope_state = {
				limit = {
					owner = scope:buying_country
				}
				save_scope_as = california
			}
		}
	}

	option = {
		name = cr_russian_alaska_events.1.a
		#custom_tooltip = cr_russian_alaska_events.1.a_tt
		s:STATE_CALIFORNIA.region_state:ASK = {
			remove_building = building_fur_trading_post
			force_resource_depletion = bg_fur_trading_post
		}
		default_option = yes
		if = {
			limit = {
				var:cr_russian_california_counter < 50
			}
			custom_tooltip = {
				text = cr_russian_alaska_events.1.a_5years
				change_variable = {
					name = cr_russian_california_counter
					add = 60
				}
			}
		}
		else_if = {
			limit = {
				var:cr_russian_california_counter < 60
			}
			custom_tooltip = {
				text = cr_russian_alaska_events.1.a_4years
				change_variable = {
					name = cr_russian_california_counter
					add = 48
				}
			}
		}
		else_if = {
			limit = {
				var:cr_russian_california_counter < 70
			}
			custom_tooltip = {
				text = cr_russian_alaska_events.1.a_3years
				change_variable = {
					name = cr_russian_california_counter
					add = 36
				}
			}
		}
		else_if = {
			limit = {
				var:cr_russian_california_counter < 80
			}
			custom_tooltip = {
				text = cr_russian_alaska_events.1.a_2years
				change_variable = {
					name = cr_russian_california_counter
					add = 24
				}
			}
		}
		else_if = {
			limit = {
				var:cr_russian_california_counter < 100
			}
			custom_tooltip = {
				text = cr_russian_alaska_events.1.a_1years
				change_variable = {
					name = cr_russian_california_counter
					add = 12
				}
			}
		}
		else = {
		
		}
		ai_chance = {
			base = 85
		}
	}

	option = {
		name = cr_russian_alaska_events.1.b
		trigger = {
			is_at_war = no
		}
		custom_tooltip = {
			text = cr_russian_alaska_events.1.b_tt
			scope:buying_country = {
				trigger_event = { id = cr_russian_alaska_events.2 days = 30 }			
			}
		}
		ai_chance = {
			base = 15
			modifier = {
				factor = 2
				taking_loans = yes
			}
		}
	}
}

cr_russian_alaska_events.2 = { #The Future of Russian California
	type = country_event
	placement = p:x1116AA

	title = cr_russian_alaska_events.2.t
	desc = cr_russian_alaska_events.2.desc
	flavor = cr_russian_alaska_events.2.f
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/africa/construction_colony"

	icon = "gfx/interface/icons/event_icons/event_default.dds"

	event_image = {
		video = "gfx/event_pictures/southamerica_aristocrats.bk2"
	}
	
	duration = 3

	trigger = {
	}

	immediate = {
	
	}

	option = {
		name = cr_russian_alaska_events.2.a
		scope:selling_country = {
			trigger_event = { id = cr_russian_alaska_events.3 }			
		}
		show_as_tooltip = {
			s:STATE_CALIFORNIA.region_state:THIS = {
				remove_building = building_fur_trading_post
				force_resource_depletion = bg_fur_trading_post
			}
		}
		add_treasury = -5000
		default_option = yes
		ai_chance = {
			base = 95
			modifier = {
				factor = 0
				gold_reserves < 10000
			}
			modifier = {
				OR = {
					is_diplomatic_play_committed_participant = yes
					is_at_war = yes
				}
				add = -1000
			}
		}
	}

	option = {
		name = cr_russian_alaska_events.2.b
		scope:selling_country = {
			trigger_event = { id = cr_russian_alaska_events.4 }			
		}
		ai_chance = {
			base = 0
			modifier = {
				add = 100
				gold_reserves < 10000
			}
			modifier = {
				OR = {
					is_diplomatic_play_committed_participant = yes
					is_at_war = yes
				}
				add = 1000
			}
		}
	}
}

cr_russian_alaska_events.3 = { #Mexico Accepts
	type = country_event
	placement = ROOT

	title = cr_russian_alaska_events.3.t
	desc = cr_russian_alaska_events.3.desc
	flavor = cr_russian_alaska_events.3.f
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/africa/construction_colony"

	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	event_image = {
		video = "gfx/event_pictures/southamerica_aristocrats.bk2"
	}
	
	duration = 3

	trigger = {
	}

	immediate = {
	}

	option = {
		name = cr_russian_alaska_events.3.a
		custom_tooltip = cr_russian_alaska_events.closing_je
		s:STATE_CALIFORNIA.region_state:ROOT = {
			set_state_owner = scope:buying_country
		}
		add_treasury = 5000
		scope:california = {
			remove_building = building_fur_trading_post
			force_resource_depletion = bg_fur_trading_post
		}
		default_option = yes
	}
}

cr_russian_alaska_events.4 = { #Mexico Rejects
	type = country_event
	placement = ROOT

	title = cr_russian_alaska_events.4.t
	desc = cr_russian_alaska_events.4.desc
	flavor = cr_russian_alaska_events.4.f
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/africa/construction_colony"

	icon = "gfx/interface/icons/event_icons/event_industry.dds"

	event_image = {
		video = "gfx/event_pictures/southamerica_aristocrats.bk2"
	}
	
	duration = 3

	trigger = {
	}

	immediate = {
	}

	option = {
		name = cr_russian_alaska_events.4.a
		default_option = yes
		s:STATE_CALIFORNIA.region_state:ASK = {
			remove_building = building_fur_trading_post
			force_resource_depletion = bg_fur_trading_post
		}
		if = {
			limit = {
				var:cr_russian_california_counter < 50
			}
			custom_tooltip = {
				text = cr_russian_alaska_events.1.a_5years
				change_variable = {
					name = cr_russian_california_counter
					add = 60
				}
			}
		}
		else_if = {
			limit = {
				var:cr_russian_california_counter < 60
			}
			custom_tooltip = {
				text = cr_russian_alaska_events.1.a_4years
				change_variable = {
					name = cr_russian_california_counter
					add = 48
				}
			}
		}
		else_if = {
			limit = {
				var:cr_russian_california_counter < 70
			}
			custom_tooltip = {
				text = cr_russian_alaska_events.1.a_3years
				change_variable = {
					name = cr_russian_california_counter
					add = 36
				}
			}
		}
		else_if = {
			limit = {
				var:cr_russian_california_counter < 80
			}
			custom_tooltip = {
				text = cr_russian_alaska_events.1.a_2years
				change_variable = {
					name = cr_russian_california_counter
					add = 24
				}
			}
		}
		else_if = {
			limit = {
				var:cr_russian_california_counter < 100
			}
			custom_tooltip = {
				text = cr_russian_alaska_events.1.a_1years
				change_variable = {
					name = cr_russian_california_counter
					add = 12
				}
			}
		}
		else = {
		
		}
	}
}


cr_russian_alaska_events.5 = { #The Liquidation of Fort Ross
	type = country_event
	placement = p:x1116AA

	title = cr_russian_alaska_events.5.t
	desc = cr_russian_alaska_events.5.desc
	flavor = cr_russian_alaska_events.5.f
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/africa/construction_colony"

	icon = "gfx/interface/icons/event_icons/event_default.dds"

	event_image = {
		video = "gfx/event_pictures/southamerica_aristocrats.bk2"
	}
	
	duration = 3

	trigger = {
	}

	immediate = {
		ROOT = {
			save_scope_as = selling_country
		}
		top_overlord = {
			save_scope_as = selling_country_overlord
		}
		p:x1116AA.owner = {
			save_scope_as = buying_country
		}
		s:STATE_CALIFORNIA = {
			random_scope_state = {
				limit = {
					owner = scope:buying_country
				}
				save_scope_as = california
			}
		}
	}

	option = {
		name = cr_russian_alaska_events.5.a
		custom_tooltip = cr_russian_alaska_events.closing_je
		scope:buying_country = {
			trigger_event = { id = cr_russian_alaska_events.6 }			
		}
		hidden_effect = {
			scope:selling_country_overlord = {
				trigger_event = { id = cr_russian_alaska_events.6 }			
			}
			scope:california = {
				remove_building = building_fur_trading_post
				force_resource_depletion = bg_fur_trading_post
			}
		}
		default_option = yes
	}
}

cr_russian_alaska_events.6 = { #The End of Russian America
	type = country_event
	placement = p:x1116AA

	title = cr_russian_alaska_events.6.t
	desc = cr_russian_alaska_events.6.desc
	flavor = cr_russian_alaska_events.6.f
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/africa/construction_colony"

	icon = "gfx/interface/icons/event_icons/event_default.dds"

	event_image = {
		video = "gfx/event_pictures/southamerica_aristocrats.bk2"
	}
	
	duration = 3

	trigger = {
	}

	immediate = {
	
	}

	option = {
		name = cr_russian_alaska_events.6.a
		trigger = {
			this = scope:buying_country
		}
		s:STATE_CALIFORNIA.region_state:ASK = {
			set_state_owner = scope:buying_country
		}
		default_option = yes
	}

	option = {
		name = cr_russian_alaska_events.6.b
		trigger = {
			this = scope:selling_country_overlord
		}
		default_option = yes
	}
}

cr_russian_alaska_events.9 = { #The Golden Gate
	type = country_event
	placement = p:x1116AA

	title = cr_russian_alaska_events.6.t
	desc = cr_russian_alaska_events.6.desc
	flavor = cr_russian_alaska_events.6.f
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/africa/construction_colony"

	icon = "gfx/interface/icons/event_icons/event_default.dds"

	event_image = {
		video = "gfx/event_pictures/southamerica_aristocrats.bk2"
	}
	
	duration = 3

	trigger = {
	}

	immediate = {
		ROOT = {
			save_scope_as = selling_country
		}
		top_overlord = {
			save_scope_as = selling_country_overlord
		}
		p:x1116AA.owner = {
			save_scope_as = buying_country
		}
		s:STATE_CALIFORNIA = {
			random_scope_state = {
				limit = {
					owner = ROOT
				}
				save_scope_as = california
			}
		}
	}

	option = {
		name = cr_russian_alaska_events.9.a
		custom_tooltip = cr_russian_alaska_events.closing_je
		scope:california = {
			add_modifier = {
				name = cr_golden_gate_25
				months = long_modifier_time
			}
		}
		hidden_effect = {
			remove_variable = cr_russian_california_counter
		}
		default_option = yes
	}
}


cr_russian_alaska_events.10 = { #The Inland Empire
	type = country_event
	placement = p:x1116AA

	title = cr_russian_alaska_events.10.t
	desc = cr_russian_alaska_events.10.desc
	flavor = cr_russian_alaska_events.10.f
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/africa/construction_colony"

	icon = "gfx/interface/icons/event_icons/event_default.dds"

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_gold_prospectors.bk2"
	}
	
	duration = 3

	trigger = {
		s:STATE_CALIFORNIA.region_state:ASK = {
			OR = {
				any_scope_building = {
					is_building_type = building_wheat_farm
					weekly_profit > 0
					cash_reserves_ratio > 0.8
				}
			}	
			OR = {
				any_scope_building = {
					is_building_type = building_livestock_ranch
					weekly_profit > 0
					cash_reserves_ratio > 0.8
				}
			}	
			OR = {
				any_scope_building = {
					is_building_type = building_cotton_plantation
					weekly_profit > 0
					cash_reserves_ratio > 0.8
				}
			}			
		}
	}

	immediate = {
		ROOT = {
			save_scope_as = selling_country
		}
		top_overlord = {
			save_scope_as = selling_country_overlord
		}
		s:STATE_CALIFORNIA = {
			random_scope_state = {
				limit = {
					owner = ROOT
				}
				save_scope_as = california
			}
		}
	}

	option = {
		name = cr_russian_alaska_events.10.a
		scope:california = {
			add_modifier = {
				name = cr_valley_of_plenty_25
				months = long_modifier_time
			}
		}
		if = {
			limit = {
				var:cr_russian_california_counter < 50
			}
			custom_tooltip = {
				text = cr_russian_alaska_events.10.a_1years
				change_variable = {
					name = cr_russian_california_counter
					subtract = 12
				}
			}
		}
		else_if = {
			limit = {
				var:cr_russian_california_counter < 60
			}
			custom_tooltip = {
				text = cr_russian_alaska_events.10.a_2years
				change_variable = {
					name = cr_russian_california_counter
					subtract = 24
				}
			}
		}
		else_if = {
			limit = {
				var:cr_russian_california_counter < 70
			}
			custom_tooltip = {
				text = cr_russian_alaska_events.10.a_3years
				change_variable = {
					name = cr_russian_california_counter
					subtract = 36
				}
			}
		}
		else_if = {
			limit = {
				var:cr_russian_california_counter < 80
			}
			custom_tooltip = {
				text = cr_russian_alaska_events.10.a_4years
				change_variable = {
					name = cr_russian_california_counter
					subtract = 48
				}
			}
		}
		else_if = {
			limit = {
				var:cr_russian_california_counter < 100
			}
			custom_tooltip = {
				text = cr_russian_alaska_events.10.a_5years
				change_variable = {
					name = cr_russian_california_counter
					subtract = 60
				}
			}
		}
		else = {
			custom_tooltip = {
				text = cr_russian_alaska_events.10.a_6years
				change_variable = {
					name = cr_russian_california_counter
					subtract = 72
				}
			}
		}
	}
}

cr_russian_alaska_events.11 = { #Valley of Plenty
	type = country_event
	placement = p:x1116AA

	title = cr_russian_alaska_events.11.t
	desc = cr_russian_alaska_events.11.desc
	flavor = cr_russian_alaska_events.11.f
	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/africa/construction_colony"

	icon = "gfx/interface/icons/event_icons/event_default.dds"

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_gold_prospectors.bk2"
	}
	
	duration = 3

	trigger = {
	}

	immediate = {
		ROOT = {
			save_scope_as = selling_country
		}
		top_overlord = {
			save_scope_as = selling_country_overlord
		}
		p:x1116AA.owner = {
			save_scope_as = buying_country
		}
		s:STATE_CALIFORNIA = {
			random_scope_state = {
				limit = {
					owner = ROOT
				}
				save_scope_as = california
			}
		}
	}

	option = {
		name = cr_russian_alaska_events.11.a
		custom_tooltip = cr_russian_alaska_events.closing_je
		scope:california = {
		hidden_effect = {
				if = {
					limit = {
						has_modifier = cr_valley_of_plenty_25
					}
					remove_modifier = cr_valley_of_plenty_25
				}
			}
		}
		scope:california = {
			add_modifier = {
				name = cr_valley_of_plenty_50
				months = long_modifier_time
			}
		}
		capital = {
			add_modifier = {
				name = cr_valley_of_plenty_25
				months = long_modifier_time
			}
		}
	}
}