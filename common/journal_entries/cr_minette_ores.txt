je_cr_minette_ores = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"
	
	group = je_group_technology

	immediate = {
		ROOT = {
			save_scope_as = minette_country_scope
		}
		if = {
			any_scope_state = {
				state_region = s:STATE_LORRAINE
			}
			random_scope_state = {
				limit = {
					state_region = s:STATE_LORRAINE
				}
				save_scope_as = minette_ore_state
			}
			p:xC5F13A = {
				save_scope_as = minette_ore_location
			}
		}
		else = {
			random_scope_state = {
				limit = {
					state_region = s:STATE_ALSACE_LORRAINE
				}
				save_scope_as = minette_ore_state
				p:xB000E0 = {
					save_scope_as = minette_ore_location
				}
			}
		}
		if = {
			limit = {
				c:FRA ?= this
			}
			trigger_event = {
				id = cr_minette_ores_events.2
			}
		}
	}
	
	scripted_progress_bar = cr_minette_ores_progress_bar
	
	complete = {
		custom_tooltip = {
			text = je_cr_minette_ores_complete_tt
			scope:journal_entry = {
				"scripted_bar_progress(cr_minette_ores_progress_bar)" >= 500
			}
		}
	}

	on_complete = {
		#trigger_event = { id = silkworm_diseases.9 }
		s:STATE_ALSACE_LORRAINE = {
			remove_state_trait = state_trait_minette_ore
			add_state_trait = state_trait_minette_ore_2
		}
		s:STATE_LORRAINE = {
			remove_state_trait = state_trait_minette_ore
			add_state_trait = state_trait_minette_ore_2
		}
	}

	fail = {
		custom_tooltip = {
			text = minette_je_fail_tt
			NOT = {
				any_scope_state = {
					state_region = s:STATE_ALSACE_LORRAINE
				}
			}
		}
	}

	on_fail = {
		hidden_effect = {
			random_country = {
				limit = {
					any_scope_state = {
						state_region = s:STATE_ALSACE_LORRAINE
					}
					NOT = {
						has_technology_researched = bessemer_process
					}
				}
				trigger_event = { id = cr_minette_ores_events.3 days = 7 }
			}
			random_country = {
				limit = {
					any_scope_state = {
						state_region = s:STATE_ALSACE_LORRAINE
					}
					NOT = {
						has_journal_entry = je_cr_minette_ores 
					}
				}
				add_journal_entry = { type = je_cr_minette_ores }
			}
		}
	}

	on_monthly_pulse = {
		random_events = {
			#150 = 0
		}
	}

	invalid = {
	}
	
	on_invalid = {
	}

	#current_value = {
	#	value = root.var:minette_progress_var
	#}
	#
	#goal_add_value = {
	#	add = 48
	#}

	weight = 100

	should_be_pinned_by_default = no
}

